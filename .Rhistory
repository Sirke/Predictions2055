pairs.panels(data[,c(3:23)])
#plottailua
xyplot(terri~year|id, data=data, type = c("p", "r"))
boxplot(terri~year, data=data)
xyplot(terri~year, data=data, type = c("p", "r"))
xyplot(terri~temp|fyear, data=data, type = c("p", "r"))
xyplot(terri~prec|fyear, data=data, type = c("p", "r"))
xyplot(terri~open|fyear, data=data, type = c("p", "r"))
xyplot(terri~shanG|fyear, data=data, type = c("p", "r"))
xyplot(terri~X|fyear, data=data, type = c("p", "r"))
xyplot(terri~Y|fyear, data=data, type = c("p", "r"))
xyplot(terri~agri5, data=data, type = c("p", "r"))
xyplot(terri~Aroad, data=data, type = c("p", "r"))
xyplot(terri~Abuild, data=data, type = c("p", "r"))
xyplot(terri~Ariver, data=data, type = c("p", "r"))
xyplot(terri~Astream, data=data, type = c("p", "r"))
#lisätään muuttuja terp
data<-transform(data, terp = ave(terri, id, FUN = function(x) c(NA, head(x, -1))))
data[data$terri == 0 & (data$terri)-1 == 0, ]
data %>%
group_by(id) %>%
arrange(desc(year))
data %>%
group_by(id)
data
data %>%
group_by(id)
data %>%
group_by(id)
data %>%  group_by(id) %>%
mutate(delta =  ifelse(year - lag(year)) > 1, NA, (lag(terri)))
data %>%  group_by(id)
structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L,
2L, 2L, 2L, 2L, 2L), .Label = c("A", "B"), class = "factor"),
Year = c(2000L, 2001L, 2004L, 2005L, 2006L, 2007L, 1990L,
2000L, 2001L, 2005L, 2006L, 2007L, 2009L), Value = c(4L,
10L, 7L, 4L, 7L, 5L, 2L, 7L, 10L, 6L, 9L, 2L, 9L), Change = c(NA,
1.5, NA, -0.428571429, 0.75, -0.285714286, NA, 2.5, 0.428571429,
NA, 0.5, -0.777777778, NA)), .Names = c("ID", "Year", "Value",
"Change"), class = "data.frame", row.names = c(NA, -13L))
df %>%  group_by(ID) %>%
mutate(delta =  ifelse((Year - lag(Year)) > 1, NA, (Value-lag(Value))/lag(Value)))
df=structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L,
2L, 2L, 2L, 2L, 2L), .Label = c("A", "B"), class = "factor"),
Year = c(2000L, 2001L, 2004L, 2005L, 2006L, 2007L, 1990L,
2000L, 2001L, 2005L, 2006L, 2007L, 2009L), Value = c(4L,
10L, 7L, 4L, 7L, 5L, 2L, 7L, 10L, 6L, 9L, 2L, 9L), Change = c(NA,
1.5, NA, -0.428571429, 0.75, -0.285714286, NA, 2.5, 0.428571429,
NA, 0.5, -0.777777778, NA)), .Names = c("ID", "Year", "Value",
"Change"), class = "data.frame", row.names = c(NA, -13L))
df %>%  group_by(ID) %>%
mutate(delta =  ifelse((Year - lag(Year)) > 1, NA, (Value-lag(Value))/lag(Value)))
df=structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L,
2L, 2L, 2L, 2L, 2L), .Label = c("A", "B"), class = "factor"),
Year = c(2000L, 2001L, 2004L, 2005L, 2006L, 2007L, 1990L,
2000L, 2001L, 2005L, 2006L, 2007L, 2009L), Value = c(4L,
10L, 7L, 4L, 7L, 5L, 2L, 7L, 10L, 6L, 9L, 2L, 9L), Change = c(NA,
1.5, NA, -0.428571429, 0.75, -0.285714286, NA, 2.5, 0.428571429,
NA, 0.5, -0.777777778, NA)), .Names = c("ID", "Year", "Value",
"Change"), class = "data.frame", row.names = c(NA, -13L))
df %>%  group_by(ID) %>%
mutate(delta =  ifelse((Year - lag(Year)) > 1, NA, lag(Value)))
data %>%  group_by(id) %>%
mutate(delta =  ifelse(year - lag(year)) > 1, NA, (lag(terri)))
df=structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L,
2L, 2L, 2L, 2L, 2L), .Label = c("A", "B"), class = "factor"),
Year = c(2000L, 2001L, 2004L, 2005L, 2006L, 2007L, 1990L,
2000L, 2001L, 2005L, 2006L, 2007L, 2009L), Value = c(4L,
10L, 7L, 4L, 7L, 5L, 2L, 7L, 10L, 6L, 9L, 2L, 9L), Change = c(NA,
1.5, NA, -0.428571429, 0.75, -0.285714286, NA, 2.5, 0.428571429,
NA, 0.5, -0.777777778, NA)), .Names = c("ID", "Year", "Value",
"Change"), class = "data.frame", row.names = c(NA, -13L))
df %>%  group_by(ID) %>%
mutate(delta =  ifelse((Year - lag(Year)) > 1, NA, lag(Value)))
df=structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("A", "B"), class = "factor"),
Year = c(2000L, 2001L, 2004L, 2005L, 2006L, 2007L, 1990L,
2000L, 2001L, 2005L, 2006L, 2007L, 2009L), Value = c(4L,
10L, 7L, 4L, 7L, 5L, 2L, 7L, 10L, 6L, 9L, 2L, 9L), Change = c(NA,
1.5, NA, -0.428571429, 0.75, -0.285714286, NA, 2.5, 0.428571429,
NA, 0.5, -0.777777778, NA)), .Names = c("ID", "Year", "Value", "Change"), class = "data.frame", row.names = c(NA, -13L))
df %>%  group_by(ID) %>%    mutate(delta =  ifelse((Year - lag(Year)) > 1, NA, lag(Value)))
data %>%  group_by(id) %>%
data<-read.csv("OrtolanBunting.csv")
getwd()
paketit<-c("readr","tidyr","plyr","dplyr","vegan","ggplot2","lattice","psych","glmmTMB")
lapply(paketit,library,character.only=T)
data<-read.csv("OrtolanBunting.csv")
names(data)
str(data)
summary(data)
#tarkasta kaikkien luokkien muoto
data$id<-as.factor(data$id)
#luodaan vuodelle oma faktori-muuttuja
data$fyear<-as.factor(data$year)
#pinta-alalle myös oma log-muunnettu muuttuja
data$Larea=log(data$area)
data %>%  group_by(id) %>%
data %>%  group_by(id) %>%
data %>%  group_by(id) %>%
data %>%  group_by(id) %>%
mutate(terPre =  ifelse((year - lag(year)) > 1, NA, (lag(terri))))
data %>%  group_by(id)
data %>%  group_by(id) %>%
mutate(terPre =  ifelse((year - lag(year)) > 1, NA, (lag(terri))))
data
data2=data %>%  group_by(id) %>%
mutate(terPre =  ifelse((year - lag(year)) > 1, NA, (lag(terri))))
View(data2)
data<-read.csv("OrtolanBunting.csv")
names(data)
str(data)
knitr::opts_chunk$set(echo = TRUE)
#packages
getwd()
paketit<-c("here","dplyr","purrr","tidyverse","tidyr")
lapply(paketit,library,character.only=T)
knitr::opts_chunk$set(echo = TRUE)
#packages
paketit<-c("here","dplyr","purrr","tidyverse","tidyr")
lapply(paketit,library,character.only=T)
here::here()
abupres <- read.csv(here("data", "EPREDY_abu_pres.csv"))
abu26 <- read.csv(here("data", "EPREDY_abu_26.csv"))
abu45<- read.csv(here("data", "EPREDY_abu_45.csv"))
abu85<- read.csv(here("data", "EPREDY_abu_85.csv"))
papres<- read.csv(here("data", "EPREDY_pa_pres.csv"))
pa26<- read.csv(here("data", "EPREDY_pa_26.csv"))
pa45 <- read.csv(here("data", "EPREDY_pa_45.csv"))
pa85 <- read.csv(here("data", "EPREDY_pa_85.csv"))
grid <- read.csv(here("data", "XY.grid10_abu_85.csv"))
#jos haluaisin yhdistää kaikki csv:t yhteen dataframeen
#filefolder <- here("data")
#files <- dir(filefolder, pattern = "*.csv",full.names = T)
#files
#data <- files %>%
#  map(read_csv) %>%
#  reduce(cbind)
plot(grid)
str(abupres)
sp_name=names(abu26)
abus=as.data.frame(sp_name)
abus$abupres=NA
abus$abu26=NA
abus$abu45=NA
abus$abu85=NA
#total population size predicted
for(i in 1:nrow(abus)){
abus$abupres[i]=colSums(exp(abupres[i]))
abus$abu26[i]=colSums(exp(abu26[i]))
abus$abu45[i]=colSums(exp(abu45[i]))
abus$abu85[i]=colSums(exp(abu85[i]))
}
str(abus)
changes=as.data.frame(sp_name)
changes$abu26=NA
changes$abu45=NA
changes$abu85=NA
#changes in absolute numbers
#for(i in 1:nrow(changes)){
#  changes$abu26[i]=colSums(exp(abupres[i]))-colSums(exp(abu26[i]))
#  changes$abu45[i]=colSums(exp(abupres[i]))-colSums(exp(abu45[i]))
#  changes$abu85[i]=colSums(exp(abupres[i]))-colSums(exp(abu85[i]))
#}
#changes in proportions
for(i in 1:nrow(changes)){
changes$abu26[i]=1-(colSums(exp(abupres[i]))-colSums(exp(abu26[i])))/colSums(exp(abupres[i]))
changes$abu45[i]=1-(colSums(exp(abupres[i]))-colSums(exp(abu45[i])))/colSums(exp(abupres[i]))
changes$abu85[i]=1-(colSums(exp(abupres[i]))-colSums(exp(abu85[i])))/colSums(exp(abupres[i]))
}
glimpse(changes)
colMeans(changes[2:4])
mean(colMeans(changes[2:4]))
changes[order(-changes$abu26)[1:5],c(1,2)]
changes[order(-changes$abu45)[1:5],c(1,3)]
changes[order(-changes$abu85)[1:5],c(1,4)]
changes[order(changes$abu26)[1:5],1:2]
changes[order(changes$abu45)[1:5],c(1,3)]
changes[order(changes$abu85)[1:5],c(1,4)]
#wide to long format
abus2=abus %>% pivot_longer(c(abupres,abu26,abu45,abu85), names_to = "scenario", values_to = "abundance")
#add a year variable?
year=rep(c(2016,2055,2055,2055),times=120)
abus2=cbind(abus2,year)
#plot an example
ggplot(subset(abus2, sp_name %in% "Acrocephalus_palustris"), aes(year, abundance, col =scenario )) +
geom_line()
sp_name=names(pa26)
pas=as.data.frame(sp_name)
pas$papres=NA
pas$pa26=NA
pas$pa45=NA
pas$pa85=NA
#total
for(i in 1:nrow(pas)){
pas$papres[i]=colMeans(papres[i])
pas$pa26[i]=colMeans(pa26[i])
pas$pa45[i]=colMeans(pa45[i])
pas$pa85[i]=colMeans(pa85[i])
}
str(pas)
changes=as.data.frame(sp_name)
changes$pa26=NA
changes$pa45=NA
changes$pa85=NA
#changes in proportions
for(i in 1:nrow(changes)){
changes$pa26[i]=1-(colMeans(papres[i])-colMeans(pa26[i]))/colMeans(papres[i])
changes$pa45[i]=1-(colMeans(papres[i])-colMeans(pa45[i]))/colMeans(papres[i])
changes$pa85[i]=1-(colMeans(papres[i])-colMeans(pa85[i]))/colMeans(papres[i])
}
glimpse(changes)
sp_name=names(pa26)
pas=as.data.frame(sp_name)
pas$papres=NA
pas$pa26=NA
pas$pa45=NA
pas$pa85=NA
#total
for(i in 1:nrow(pas)){
pas$papres[i]=colSums(papres[i]!=0)
pas$pa26[i]=colSums(pa26[i]!=0)
pas$pa45[i]=colSums(pa45[i]!=0)
pas$pa85[i]=colSums(pa85[i]!=0)
}
str(pas)
changes=as.data.frame(sp_name)
changes$pa26=NA
changes$pa45=NA
changes$pa85=NA
#changes in proportions
for(i in 1:nrow(changes)){
changes$pa26[i]=1-(colSums(papres[i]!=0)-colSums(pa26[i]!=0))/colSums(papres[i]!=0)
changes$pa45[i]=1-(colSums(papres[i]!=0)-colSums(pa45[i]!=0))/colSums(papres[i]!=0)
changes$pa85[i]=1-(colSums(papres[i]!=0)-colSums(pa85[i]!=0))/colSums(papres[i]!=0)
}
glimpse(changes)
knitr::opts_chunk$set(echo = TRUE)
#packages
paketit<-c("here","dplyr","purrr","tidyverse","tidyr")
lapply(paketit,library,character.only=T)
here::here()
abupres <- read.csv(here("data", "EPREDY_abu_pres.csv"))
abu26 <- read.csv(here("data", "EPREDY_abu_26.csv"))
abu45<- read.csv(here("data", "EPREDY_abu_45.csv"))
abu85<- read.csv(here("data", "EPREDY_abu_85.csv"))
papres<- read.csv(here("data", "EPREDY_pa_pres.csv"))
pa26<- read.csv(here("data", "EPREDY_pa_26.csv"))
pa45 <- read.csv(here("data", "EPREDY_pa_45.csv"))
pa85 <- read.csv(here("data", "EPREDY_pa_85.csv"))
grid <- read.csv(here("data", "XY.grid10_abu_85.csv"))
#jos haluaisin yhdistää kaikki csv:t yhteen dataframeen
#filefolder <- here("data")
#files <- dir(filefolder, pattern = "*.csv",full.names = T)
#files
#data <- files %>%
#  map(read_csv) %>%
#  reduce(cbind)
plot(grid)
str(abupres)
sp_name=names(abu26)
abus=as.data.frame(sp_name)
abus$abupres=NA
abus$abu26=NA
abus$abu45=NA
abus$abu85=NA
#total population size predicted
for(i in 1:nrow(abus)){
abus$abupres[i]=colSums(exp(abupres[i]))
abus$abu26[i]=colSums(exp(abu26[i]))
abus$abu45[i]=colSums(exp(abu45[i]))
abus$abu85[i]=colSums(exp(abu85[i]))
}
str(abus)
changes=as.data.frame(sp_name)
changes$abu26=NA
changes$abu45=NA
changes$abu85=NA
#changes in absolute numbers
#for(i in 1:nrow(changes)){
#  changes$abu26[i]=colSums(exp(abupres[i]))-colSums(exp(abu26[i]))
#  changes$abu45[i]=colSums(exp(abupres[i]))-colSums(exp(abu45[i]))
#  changes$abu85[i]=colSums(exp(abupres[i]))-colSums(exp(abu85[i]))
#}
#changes in proportions
for(i in 1:nrow(changes)){
changes$abu26[i]=1-(colSums(exp(abupres[i]))-colSums(exp(abu26[i])))/colSums(exp(abupres[i]))
changes$abu45[i]=1-(colSums(exp(abupres[i]))-colSums(exp(abu45[i])))/colSums(exp(abupres[i]))
changes$abu85[i]=1-(colSums(exp(abupres[i]))-colSums(exp(abu85[i])))/colSums(exp(abupres[i]))
}
glimpse(changes)
colMeans(changes[2:4])
mean(colMeans(changes[2:4]))
changes[order(-changes$abu26)[1:5],c(1,2)]
changes[order(-changes$abu45)[1:5],c(1,3)]
changes[order(-changes$abu85)[1:5],c(1,4)]
changes[order(changes$abu26)[1:5],1:2]
changes[order(changes$abu45)[1:5],c(1,3)]
changes[order(changes$abu85)[1:5],c(1,4)]
#wide to long format
abus2=abus %>% pivot_longer(c(abupres,abu26,abu45,abu85), names_to = "scenario", values_to = "abundance")
#add a year variable?
year=rep(c(2016,2055,2055,2055),times=120)
abus2=cbind(abus2,year)
#plot an example
ggplot(subset(abus2, sp_name %in% "Acrocephalus_palustris"), aes(year, abundance, col =scenario )) +
geom_line()
sp_name=names(pa26)
pas=as.data.frame(sp_name)
pas$papres=NA
pas$pa26=NA
pas$pa45=NA
pas$pa85=NA
#total
for(i in 1:nrow(pas)){
pas$papres[i]=colMeans(papres[i])
pas$pa26[i]=colMeans(pa26[i])
pas$pa45[i]=colMeans(pa45[i])
pas$pa85[i]=colMeans(pa85[i])
}
str(pas)
changes=as.data.frame(sp_name)
changes$pa26=NA
changes$pa45=NA
changes$pa85=NA
#changes in proportions
for(i in 1:nrow(changes)){
changes$pa26[i]=1-(colMeans(papres[i])-colMeans(pa26[i]))/colMeans(papres[i])
changes$pa45[i]=1-(colMeans(papres[i])-colMeans(pa45[i]))/colMeans(papres[i])
changes$pa85[i]=1-(colMeans(papres[i])-colMeans(pa85[i]))/colMeans(papres[i])
}
glimpse(changes)
sp_name=names(pa26)
pas=as.data.frame(sp_name)
pas$papres=NA
pas$pa26=NA
pas$pa45=NA
pas$pa85=NA
#total
for(i in 1:nrow(pas)){
pas$papres[i]=colSums(papres[i]!=0)
pas$pa26[i]=colSums(pa26[i]!=0)
pas$pa45[i]=colSums(pa45[i]!=0)
pas$pa85[i]=colSums(pa85[i]!=0)
}
str(pas)
changes=as.data.frame(sp_name)
changes$pa26=NA
changes$pa45=NA
changes$pa85=NA
#changes in proportions
for(i in 1:nrow(changes)){
changes$pa26[i]=1-(colSums(papres[i]!=0)-colSums(pa26[i]!=0))/colSums(papres[i]!=0)
changes$pa45[i]=1-(colSums(papres[i]!=0)-colSums(pa45[i]!=0))/colSums(papres[i]!=0)
changes$pa85[i]=1-(colSums(papres[i]!=0)-colSums(pa85[i]!=0))/colSums(papres[i]!=0)
}
glimpse(changes)
View(abupres)
View(grid)
table(grid$V1)
sort(table(grid$V1))
library(REdaS)
library(readr)
linja1 <- read_delim("Linja_Sirke/linja1_laskennat_2022-03-16-12-35-42_linjalaskenta copy.csv",
delim = "\t", escape_double = FALSE,
trim_ws = TRUE)
setwd("C:/Users/sipiirai/OneDrive - University of Helsinki/github_mallinnus/Predictions2055")
linja1 <- read_delim("Linja_Sirke/linja1_laskennat_2022-03-16-12-35-42_linjalaskenta copy.csv",
delim = "\t", escape_double = FALSE,
trim_ws = TRUE)
setwd("C:/Users/sipiirai/OneDrive - University of Helsinki/lintuennusteet2050")
linja1 <- read_delim("Linja_Sirke/linja1_laskennat_2022-03-16-12-35-42_linjalaskenta copy.csv",
delim = "\t", escape_double = FALSE,
trim_ws = TRUE)
View(linja1)
#linja2=read.csv(file.choose())
linja2 <- read_delim("Linja_Sirke/linja2_summat_2022-03-16-12-35-53_linjalaskenta copy.csv",
delim = "\t", escape_double = FALSE,
trim_ws = TRUE)
View(linja2)
l=unique(linja1$routeId)
linja2$Idold=NA
linja2$vakio=NA
linja2$toisto=NA
linja2$lat=NA
linja2$lon=NA
linja2$count=linja2$innerCount+linja2$outerCount
linja2$farm=NA
for(i in 1:length(l)){
apu1=unique(linja1$year[which(linja1$routeId==l[i])])
for(j in 1:length(apu1)){
linja2$Idold[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$oldEventId[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
linja2$lat[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$ykjLat[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
linja2$lon[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$ykjLon[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
#linja2$farm[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
#linja1$Farm[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
# linja2$B[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
#linja1$birdCountError[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
}
apu=linja2[which(linja2$routeId==l[i]),]
if(length(unique(apu$year))>1){
linja2$toisto[which(linja2$routeId==l[i])]=1
}
if(min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)>6000 &
min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)<30000){
linja2$vakio[which(linja2$routeId==l[i])]=
min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)-
floor(min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)/1000)*1000
}
}
for(i in 1:length(l)){
apu1=unique(linja1$year[which(linja1$routeId==l[i])])
for(j in 1:length(apu1)){
linja2$Idold[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$oldEventId[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
linja2$lat[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$ykjLat[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
linja2$lon[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$ykjLon[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
linja2$farm[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$Farm[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
linja2$B[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$birdCountError[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
}
apu=linja2[which(linja2$routeId==l[i]),]
if(length(unique(apu$year))>1){
linja2$toisto[which(linja2$routeId==l[i])]=1
}
if(min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)>6000 &
min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)<30000){
linja2$vakio[which(linja2$routeId==l[i])]=
min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)-
floor(min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)/1000)*1000
}
}
for(i in 1:length(l)){
apu1=unique(linja1$year[which(linja1$routeId==l[i])])
for(j in 1:length(apu1)){
linja2$Idold[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$oldEventId[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
linja2$lat[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$ykjLat[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
linja2$lon[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
linja1$ykjLon[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
#linja2$farm[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
#linja1$Farm[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
#linja2$B[which(linja2$routeId==l[i] & linja2$year==apu1[j])]=
#linja1$birdCountError[which(linja1$routeId==l[i] & linja1$year==apu1[j])]
}
apu=linja2[which(linja2$routeId==l[i]),]
if(length(unique(apu$year))>1){
linja2$toisto[which(linja2$routeId==l[i])]=1
}
if(min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)>6000 &
min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)<30000){
linja2$vakio[which(linja2$routeId==l[i])]=
min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)-
floor(min(linja1$oldEventId[which(linja1$routeId==l[i])],na.rm=TRUE)/1000)*1000
}
}
View(abu26)
knitr::opts_chunk$set(echo = TRUE)
#subsettaa aineisto per latitudi
unique(grid$V1)
#subsettaa aineisto per latitudi
lats=unique(grid$V1)
lons=unique(grid$V2)
order(lats)
sort(lats)
#subsettaa aineisto per latitudi
lons=unique(grid$V1)
lats=unique(grid$V2)
sort(lats)
abupres2=cbind(abupres,grid)
View(abupres2)
names(abupres2)
#new names for grid columns
rename(grid,c("V1","V2"),c("x","y"))
#packages
paketit<-c("here","dplyr","purrr","tidyverse","tidyr")
lapply(paketit,library,character.only=T)
#new names for grid columns
rename(grid,c("x","y"),c("V1","V2"))
#new names for grid columns
rename(grid,c("x","y")=c("V1","V2"))
#new names for grid columns
rename(grid,c(x=V1,y=V2))
#new names for grid columns
grid=rename(grid,c(x=V1,y=V2))
lons=unique(grid$x)
lats=unique(grid$y)
sort(lats)
abupres2=cbind(abupres,grid)
names(abupres2)
lats=sort(lats)
x <- 1:5
y <- 6:10
z <- NULL
for (i in c(1:4)) {
z <- c(z, x[i] + y[i])
}
z <- x + y
which(outer(outer(the.seq, the.seq, ’+’), the.seq, ’+’) == 6,
arr.ind=TRUE)
which(outer(outer(the.seq, the.seq, ’+’), the.seq, ’+’) == 6,
arr.ind=TRUE)
which(outer(outer(the.seq, the.seq, ’+’), the.seq, ’+’) == 6,arr.ind=TRUE)
the.seq <- 1:4
which(outer(outer(the.seq, the.seq, ’+’), the.seq, ’+’) == 6,arr.ind=TRUE)
which(outer(outer(the.seq, the.seq, ’+’), the.seq, ’+’) == 6,arr.ind=TRUE)
